# =============================================================================
# Saturn Platform - Development Environment Configuration
# =============================================================================
# Copy this file to /data/saturn/source/.env on your server
# Generate secrets: openssl rand -base64 32
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_ID=saturn-dev
APP_NAME="Saturn Platform (Dev)"
APP_ENV=development
APP_DEBUG=true
APP_URL=https://dev.saturn.ac
SATURN_ENV=dev

# Generate with: php artisan key:generate --show
# Or: echo "base64:$(openssl rand -base64 32)"
APP_KEY=

# -----------------------------------------------------------------------------
# Server Identity (unique per environment)
# -----------------------------------------------------------------------------
# Generate unique UUID: uuidgen or cat /proc/sys/kernel/random/uuid
SERVER_UUID=

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
DB_CONNECTION=pgsql
DB_HOST=saturn-db
DB_PORT=5432
DB_DATABASE=saturn
DB_USERNAME=saturn
# Generate: openssl rand -base64 24 | tr -dc 'a-zA-Z0-9' | head -c 32
DB_PASSWORD=

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_HOST=saturn-redis
REDIS_PORT=6379
# Generate: openssl rand -base64 24 | tr -dc 'a-zA-Z0-9' | head -c 32
REDIS_PASSWORD=

# Cache, Session, Queue
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# Session Security (true â€” HTTPS via Caddy)
SESSION_SECURE_COOKIE=true

# -----------------------------------------------------------------------------
# WebSocket (Soketi)
# -----------------------------------------------------------------------------
BROADCAST_CONNECTION=pusher

# Backend connection (internal Docker network: Laravel -> Soketi)
PUSHER_BACKEND_HOST=saturn-realtime
PUSHER_BACKEND_PORT=6001
# Generate: openssl rand -hex 16
PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_SCHEME=http

# Frontend WebSocket (browser -> Traefik/Caddy -> Soketi)
# IMPORTANT: Leave empty for auto-detection (uses window.location.hostname)
# Or set to your public domain. NEVER use saturn-realtime here!
VITE_PUSHER_HOST=
VITE_PUSHER_PORT=443
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_SCHEME=wss

# -----------------------------------------------------------------------------
# Mail (optional for dev)
# -----------------------------------------------------------------------------
MAIL_MAILER=log
MAIL_HOST=
MAIL_PORT=587
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="dev@saturn.local"
MAIL_FROM_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_CHANNEL=stack
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# Instance Settings
# -----------------------------------------------------------------------------
IS_REGISTRATION_ENABLED=true
IS_API_ENABLED=true

# -----------------------------------------------------------------------------
# Docker
# -----------------------------------------------------------------------------
REGISTRY_URL=ghcr.io
SATURN_IMAGE_TAG=main

# -----------------------------------------------------------------------------
# Sanctum / CORS
# -----------------------------------------------------------------------------
SANCTUM_STATEFUL_DOMAINS=dev.saturn.ac
CORS_ALLOWED_ORIGINS=https://dev.saturn.ac

# -----------------------------------------------------------------------------
# PHP Settings
# -----------------------------------------------------------------------------
PHP_MEMORY_LIMIT=512M
PHP_FPM_PM_CONTROL=dynamic
PHP_FPM_PM_START_SERVERS=2
PHP_FPM_PM_MIN_SPARE_SERVERS=1
PHP_FPM_PM_MAX_SPARE_SERVERS=5

# -----------------------------------------------------------------------------
# Error Tracking (Sentry)
# -----------------------------------------------------------------------------
# Get your DSN from https://sentry.io -> Settings -> Projects -> Client Keys
# Backend (Laravel)
SENTRY_DSN=
SENTRY_ENABLE_TRACING=false

# Frontend (React) - uses same project or separate frontend project
VITE_SENTRY_DSN="${SENTRY_DSN}"
VITE_SENTRY_ENABLE_DEV=false

# -----------------------------------------------------------------------------
# Debugging
# -----------------------------------------------------------------------------
SOKETI_DEBUG=true
TELESCOPE_ENABLED=false
