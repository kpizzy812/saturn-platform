# =============================================================================
# Saturn Platform - Production Environment Configuration
# =============================================================================
# Copy this file to /data/saturn/source/.env on your server
# Generate secrets: openssl rand -base64 32
# =============================================================================

# -----------------------------------------------------------------------------
# Application (CRITICAL: must be set correctly for production)
# -----------------------------------------------------------------------------
APP_ID=saturn-prod
APP_NAME="Saturn Platform"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://saturn.ac
SATURN_ENV=production

# Generate with: php artisan key:generate --show
# Or: echo "base64:$(openssl rand -base64 32)"
APP_KEY=

# -----------------------------------------------------------------------------
# Server Identity (unique per environment)
# -----------------------------------------------------------------------------
# Generate unique UUID: uuidgen or cat /proc/sys/kernel/random/uuid
SERVER_UUID=

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
DB_CONNECTION=pgsql
DB_HOST=saturn-db
DB_PORT=5432
DB_DATABASE=saturn
DB_USERNAME=saturn
# Generate: openssl rand -base64 24 | tr -dc 'a-zA-Z0-9' | head -c 32
DB_PASSWORD=

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_HOST=saturn-redis
REDIS_PORT=6379
# Generate: openssl rand -base64 24 | tr -dc 'a-zA-Z0-9' | head -c 32
REDIS_PASSWORD=

# Cache, Session, Queue
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# Session Security (MUST be true for HTTPS)
SESSION_SECURE_COOKIE=true

# -----------------------------------------------------------------------------
# WebSocket (Soketi)
# -----------------------------------------------------------------------------
BROADCAST_CONNECTION=pusher

# Backend connection (internal Docker network: Laravel -> Soketi)
PUSHER_BACKEND_HOST=saturn-realtime
PUSHER_BACKEND_PORT=6001
# Generate: openssl rand -hex 16
PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_SCHEME=http

# Frontend WebSocket (browser -> Traefik/Caddy -> Soketi)
# IMPORTANT: Leave empty for auto-detection (uses window.location.hostname)
# Or set to your public domain. NEVER use saturn-realtime here!
VITE_PUSHER_HOST=
VITE_PUSHER_PORT=443
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_SCHEME=wss

# -----------------------------------------------------------------------------
# Mail
# -----------------------------------------------------------------------------
MAIL_MAILER=smtp
MAIL_HOST=
MAIL_PORT=587
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS="noreply@saturn.ac"
MAIL_FROM_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_CHANNEL=production
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Sanctum
# -----------------------------------------------------------------------------
SANCTUM_STATEFUL_DOMAINS=saturn.ac
CORS_ALLOWED_ORIGINS=https://saturn.ac

# -----------------------------------------------------------------------------
# Instance Settings
# -----------------------------------------------------------------------------
IS_REGISTRATION_ENABLED=false
IS_API_ENABLED=true

# -----------------------------------------------------------------------------
# Docker
# -----------------------------------------------------------------------------
REGISTRY_URL=ghcr.io
SATURN_IMAGE_TAG=main

# -----------------------------------------------------------------------------
# PHP Settings
# -----------------------------------------------------------------------------
PHP_MEMORY_LIMIT=1G
PHP_FPM_PM_CONTROL=dynamic
PHP_FPM_PM_START_SERVERS=4
PHP_FPM_PM_MIN_SPARE_SERVERS=2
PHP_FPM_PM_MAX_SPARE_SERVERS=10

# -----------------------------------------------------------------------------
# Error Tracking (Sentry)
# -----------------------------------------------------------------------------
# Get your DSN from https://sentry.io -> Settings -> Projects -> Client Keys
SENTRY_DSN=
SENTRY_ENABLE_TRACING=true

VITE_SENTRY_DSN="${SENTRY_DSN}"
VITE_SENTRY_ENABLE_DEV=false

# -----------------------------------------------------------------------------
# Debugging (all disabled in production)
# -----------------------------------------------------------------------------
SOKETI_DEBUG=false
TELESCOPE_ENABLED=false
