# =============================================================================
# Saturn Platform - Local Development Configuration
# =============================================================================
# Copy to .env and adjust values as needed.
# Generate secrets: openssl rand -base64 32
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
APP_ENV=local
APP_NAME="Saturn Platform"
APP_ID=development
SATURN_ENV=dev
APP_KEY=
APP_URL=http://localhost
# Comma-separated list of allowed CORS origins. Must be set explicitly in production.
# Falls back to APP_URL if not set. Leaving both empty blocks all cross-origin requests.
CORS_ALLOWED_ORIGINS="${APP_URL}"
APP_PORT=8000
APP_DEBUG=true
SSH_MUX_ENABLED=true

# Trusted reverse proxy CIDRs (comma-separated).
# In production behind Traefik (Docker): 172.16.0.0/12,10.0.0.0/8
# Never use '*' in production â€” it allows X-Forwarded-* header spoofing.
TRUSTED_PROXIES=127.0.0.1,172.16.0.0/12,10.0.0.0/8

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------
DB_CONNECTION=pgsql
DB_HOST=postgres
DB_PORT=5432
DB_DATABASE=saturn
DB_USERNAME=saturn
DB_PASSWORD=password

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# Cache / Queue / Session
# -----------------------------------------------------------------------------
CACHE_DRIVER=redis
SESSION_DRIVER=redis
QUEUE_CONNECTION=redis

# -----------------------------------------------------------------------------
# Broadcasting / WebSocket (Soketi)
# -----------------------------------------------------------------------------
# Generate unique credentials per environment: openssl rand -hex 16
BROADCAST_DRIVER=pusher
PUSHER_APP_ID=saturn-dev
PUSHER_APP_KEY=saturn-dev-key
PUSHER_APP_SECRET=saturn-dev-secret
PUSHER_BACKEND_HOST=saturn-realtime
PUSHER_BACKEND_PORT=6001
PUSHER_SCHEME=http

# Frontend WebSocket (must match PUSHER_* above)
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_BACKEND_HOST}"
VITE_PUSHER_PORT="${PUSHER_BACKEND_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"

# -----------------------------------------------------------------------------
# Mail (Mailpit for local dev)
# -----------------------------------------------------------------------------
MAIL_MAILER=smtp
MAIL_HOST=mailpit
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_FROM_ADDRESS="noreply@saturn.local"
MAIL_FROM_NAME="${APP_NAME}"

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
# Development: LOG_CHANNEL=stack (plain text to file)
# Production:  LOG_CHANNEL=production-stack (JSON to file + Docker stdout)
#              LOG_LEVEL=info
LOG_CHANNEL=stack
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# Debugging Tools
# -----------------------------------------------------------------------------
TELESCOPE_ENABLED=false
RAY_ENABLED=false

# Selenium (for Laravel Dusk)
DUSK_DRIVER_URL=http://selenium:4444

# -----------------------------------------------------------------------------
# External Services (optional)
# -----------------------------------------------------------------------------
SENTRY_DSN=

# Storage API Keys
BUNNY_API_KEY=
BUNNY_STORAGE_API_KEY=

# -----------------------------------------------------------------------------
# Offsite Database Backups (S3 / Hetzner Object Storage / MinIO)
# -----------------------------------------------------------------------------
# Set these in your VPS .env to enable automatic S3 upload after each deploy.
# If not set, backups are kept locally only (/data/saturn/{env}/backups/).
# Supports AWS S3, Hetzner Object Storage, MinIO, and any S3-compatible API.
#
# Hetzner Object Storage example:
#   BACKUP_S3_ENDPOINT=https://fsn1.your-objectstorage.com
#   BACKUP_S3_REGION=fsn1
#
# AWS S3 example: leave BACKUP_S3_ENDPOINT empty.
BACKUP_S3_BUCKET=
BACKUP_S3_ENDPOINT=
BACKUP_S3_KEY=
BACKUP_S3_SECRET=
BACKUP_S3_REGION=us-east-1
